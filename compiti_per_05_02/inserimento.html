<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Biblioteca - Inserimento Libri</title>
    <style>
        body{font-family:Arial,sans-serif;background:#fff;color:#000;margin:8px;padding:8px}
        h1{font-size:1.2rem;text-align:center;margin:6px 0}
        .form-container{padding:6px;border:1px solid #fff;background:#fff}
        label,input,select,button,textarea{display:block;width:100%;margin:6px 0;padding:6px;border:1px solid #ccc;background:#fff;color:#000;font-size:14px}
        input,select{box-sizing:border-box}
        button{background:#eee;border:1px solid #ddd;color:#000;cursor:pointer}
        .btn,.btn-secondary{padding:6px}
        .messaggio{display:none;padding:6px}
        table{width:100%;border-collapse:collapse}
        th,td{padding:6px;border:1px solid #fff;text-align:left}
        .vuoto{padding:12px;text-align:center;color:#000}
        .info{padding:6px;background:#fff;border-left:3px solid #fff}
    </style>
</head>
<body>
    <h1>ðŸ“š Biblioteca - Inserimento Libri</h1>
    
    <div class="form-container">
        <form id="formLibro">
            <label for="titolo">Titolo del Libro *</label>
            <input type="text" id="titolo" name="titolo" required placeholder="Es: Il Signore degli Anelli">
            
            <label for="autore">Autore *</label>
            <input type="text" id="autore" name="autore" required placeholder="Es: J.R.R. Tolkien">
            
            <label for="casaEditrice">Casa Editrice *</label>
            <input type="text" id="casaEditrice" name="casaEditrice" required placeholder="Es: Mondadori">
            
            <label for="annoEdizione">Anno di Edizione</label>
            <input type="number" id="annoEdizione" name="annoEdizione" min="1400" max="2026" placeholder="Es: 2023">
            
            <label for="genere">Genere *</label>
            <select id="genere" name="genere" required >
                <option value="">-- Seleziona un genere --</option>
                <option value="narrativa">Narrativa</option>
                <option value="fantasy">Fantasy</option>
                <option value="giallo">Giallo</option>
                <option value="horror">Horror</option>
                <option value="romantico">Romantico</option>
                <option value="storico">Storico</option>
                <option value="scientifico">Scientifico</option>
                <option value="biografia">Biografia</option>
            </select>
            
            <label for="numeroPagine">Numero Pagine</label>
            <input type="number" id="numeroPagine" name="numeroPagine" min="1" placeholder="Es: 350">
            
            <button type="submit" class="btn">Aggiungi Libro</button>
            <button type="button" class="btn btn-secondary" onclick="vaiAVisualizza()">
                Visualizza Biblioteca
            </button>
        </form>
        
    </div>

    <script>
        // Funzione per caricare i dati esistenti dal LocalStorage
        function caricaBiblioteca() {
            const bibliotecaJSON = localStorage.getItem('biblioteca');
            if (bibliotecaJSON) {
                return JSON.parse(bibliotecaJSON);
            } else {
                // Se non esiste, crea una struttura vuota
                return { books: [] };
            }
        }
        
        // Funzione per salvare i dati nel LocalStorage
        function salvaBiblioteca(biblioteca) {
            const bibliotecaJSON = JSON.stringify(biblioteca, null, 2);
            localStorage.setItem('biblioteca', bibliotecaJSON);
        }
        

        
        // Gestione del submit del form
        document.getElementById('formLibro').addEventListener('submit', function(e) {
            e.preventDefault(); // Previene il ricaricamento della pagina
            
            // Raccolta dati dal form
            const nuovoLibro = {
                titolo: document.getElementById('titolo').value.trim(),
                autore: document.getElementById('autore').value.trim(),
                casaEditrice: document.getElementById('casaEditrice').value.trim(),
                annoEdizione: document.getElementById('annoEdizione').value || "Non specificato",
                genere: document.getElementById('genere').value,
                numeroPagine: document.getElementById('numeroPagine').value || "Non specificato"
            };
            
            // Carica la biblioteca esistente
            const biblioteca = caricaBiblioteca();
            
            // Aggiunge il nuovo libro
            biblioteca.books.push(nuovoLibro);
            
            // Salva nel LocalStorage
            salvaBiblioteca(biblioteca);
            
            
            // Reset del form
            this.reset();
        });
        
        // Funzione per navigare alla pagina di visualizzazione
        function vaiAVisualizza() {
            window.location.href = 'visualizza.html';
        }
    </script>
</body>
</html>
